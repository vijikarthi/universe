{
  "type":"object",
    "properties": {
      "service": {
        "type": "object",
        "description": "DC/OS service configuration properties",
        "properties": {
          "name": {
            "description": "Nautilus Workspace Agent Service",
            "type": "string",
            "default": "workspace-agent"
          },
          "cpus":{
            "description":"Workspace agent CPU requirements",
            "type":"number",
            "default":1
          },
          "mem":{
            "description":"Workspace agent mem requirements (in MB)",
            "type":"integer",
            "default":1024
          },
          "count":{
            "description":"Number of workspace agents pods to run",
            "type":"integer",
            "default":1
          },
          "placement":{
            "description":"Marathon-style placement constraint for workspace agent pods",
            "type":"string",
            "default":"hostname:UNIQUE"
          },
          "cmd_prefix": {
            "description": "A generic prefix to start the scheduler.",
            "type": "string",
            "default": "LD_LIBRARY_PATH=$MESOS_SANDBOX/libmesos-bundle/lib:$LD_LIBRARY_PATH MESOS_NATIVE_JAVA_LIBRARY=$(ls $MESOS_SANDBOX/libmesos-bundle/lib/libmesos-*.so) PATH=$(ls -d $MESOS_SANDBOX/jre*/bin):$PATH"
          },
          "role": {
            "description": "The workspace agent will register with Mesos with this role.",
            "type": "string",
            "default": "*"
          },
          "principal": {
            "description": "The workspace agent will register with Mesos with this principal.",
            "type": "string",
            "default": ""
          },
          "secret": {
            "description": "The workspace agent will register with mesos with this secret.",
            "type": "string",
            "default": ""
          },
          "user": {
            "description": "Tasks will run as this user.",
            "type": "string",
            "default": "root"
          },
          "log-level": {
            "type": "string",
            "description": "log4j log level for workspace agent.  May be set to any valid log4j log level: https://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/Level.html",
            "default": "INFO"
          }
        },
        "required":[
          "cpus",
          "mem",
          "count"
        ]
      },
      "security": {
        "description": "Workspace agent components security configuration properties",
        "type": "object",
        "properties": {
          "kerberos": {
            "description": "Kerberos configuration.",
            "type": "object",
            "properties": {
              "krb5conf": {
                "description": "Base64 encoded krb5.conf file",
                "type": "string",
                "default": ""
              },
              "keytab": {
                "description": "Base64 encoded keytab file.",
                "type": "string",
                "default": ""
              },
              "principal": {
                "description": "Kerberos principal name associated with the keytab.",
                "type": "string",
                "default": ""
              }
            }
          },
          "ssl": {
            "description": "SSL certificates and private key configuration.",
            "type": "object",
            "properties": {
              "keyStoreBase64": {
                "default": "",
                "description": "Base64 encoded blob containing a Java keystore.",
                "type": "string"
              },
              "trustStoreBase64": {
                "default": "",
                "description": "Base64 encoded blob containing a Java truststore.",
                "type": "string"
              },
              "keyPassword": {
                "default": "",
                "description": "An optional password for the private key in the keystore.",
                "type": "string"
              },
              "keyStorePassword": {
                "default": "",
                "description": "An optional password for the keystore (and the key if keyPassword is not given).",
                "type": "string"
              },
              "trustStorePassword": {
                "default": "",
                "description": "An optional password for the truststore.",
                "type": "string"
              },
              "enabledAlgorithms": {
                "default": "TLS_RSA_WITH_AES_128_CBC_SHA",
                "description": "A comma-separared list of allowed ciphers.",
                "type": "string"
              }
            }
          }
        }
      },
      "hdfs": {
        "description": "Hadoop configuration properties",
        "type": "object",
        "properties": {
          "config-url": {
            "default": "http://hdfs.marathon.agentip.dcos.thisdcos.directory:9000/v1/connection",
            "type": "string",
            "description": "Base URL that serves HDFS config files (hdfs-site.xml, core-site.xml)."
          }
        }
      },
      "flink": {
        "description": "Flink service configuration properties",
        "type": "object",
        "properties": {
          "core": {
            "description": "Core configuration properties",
            "type": "object",
            "properties": {
              "slots": {
                "description": "A processing slot allows Flink to execute a distributed DataSet transformation, such as a data source or a map-transformation. As a general recommendation, the number of available CPU cores is a good default.",
                "type": "integer",
                "default": 1,
                "minimum": 1
              },
              "default-parallelism": {
                "description": "The parallelism used for programs that did not specify any other parallelism.",
                "type": "integer",
                "default": 1,
                "minimum": 1
              },
              "extra-args":{
                "description":"Use -D<KEY>=<VALUE> format to provide any additional Flink configuration options.",
                "type":"string",
                "default":""
              }
            }
          },
          "jobmanager": {
            "description": "Properties configuring the Flink AppMaster/JobManager.",
            "type": "object",
            "properties": {
              "cpus": {
                "default": 1,
                "description": "CPU shares of AppMaster.",
                "minimum": 0.1,
                "type": "number"
              },
              "memory": {
                "default": 1024,
                "description": "Memory (MB) of AppMaster.",
                "minimum": 1024,
                "type": "number"
              },
              "heap": {
                "description": "Heap size (MB) for the AppMaster JVM. This value has to be less or equal than memory.",
                "type": "number",
                "default": 256,
                "minimum": 1
              }
            }
          },
          "task-manager": {
            "description": "Properties configuring the Flink TaskManagers.",
            "type": "object",
            "properties": {
              "count": {
                "description": "Number of task managers to spawn.",
                "type": "integer",
                "default": 1,
                "minimum": 1
              },
              "cpus": {
                "description": "CPU shares of each TaskManager.",
                "type": "number",
                "default": 1,
                "minimum": 0.01
              },
              "memory": {
                "description": "Memory (MB) for each task manager.",
                "type": "number",
                "default": 1024,
                "minimum": 256
              },
              "heap": {
                "description": "Heap size (MB) for the TaskManager JVM. This value has to be less or equal than memory.",
                "type": "number",
                "default": 512,
                "minimum": 1
              },
              "memory-preallocation": {
                "description": "Specify whether TaskManager-memory should be allocated when starting up (checked) or when memory is required in the memory manager (unchecked).",
                "type": "boolean",
                "default": true
              }
            }
          },
          "security": {
            "description": "Flink security configuration properties",
            "type": "object",
            "properties": {
              "ssl": {
                "description": "Flink SSL configurations",
                "type": "object",
                "properties": {
                  "enabled": {
                    "default": false,
                    "description": "Set to true to enable Kerberos.",
                    "type": "boolean"
                  }
                },
                "kerberos": {
                  "description": "Flink Kerberos configurations",
                  "type": "object",
                  "properties": {
                    "enabled": {
                      "default": false,
                      "description": "Set to true to enable Kerberos.",
                      "type": "boolean"
                    },
                    "use-ticket-cache": {
                      "description": "Indicates whether to read from the user's kerberos ticket cache.",
                      "type": "boolean",
                      "default": true
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
}
